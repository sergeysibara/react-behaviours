{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 12adce27d36861099f15","webpack:///./src/index.js","webpack:///./src/behaviour.js","webpack:///./src/behaviours-container.js","webpack:///external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}"],"names":["default","Behaviour","owner","props","name","Object","getPrototypeOf","constructor","enabled","undefined","BehavioursContainer","behaviours","bindMethods","methods","forEach","method","bind","behaviour","firstToLowerCase","funcName","args","i","length","behaviourName","nextProps","propKey","_getBehaviour","updateProps","callMethodInAllBehaviours","arguments","nextState","prevProps","prevState","event","Component","str","substr","toLowerCase"],"mappings":"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","file":"react-behaviours.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"react\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"react-behaviours\", [\"react\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"react-behaviours\"] = factory(require(\"react\"));\n\telse\n\t\troot[\"react-behaviours\"] = factory(root[\"React\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__) {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 12adce27d36861099f15","export { default as Behaviour } from './behaviour';\nexport { default as BehavioursContainer } from './behaviours-container';\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","/**\r\n * Базовый класс для поведений, добавляемых к реакт компонентам\r\n */\r\nexport default class Behaviour {\r\n    /**\r\n     * @param {{enabled: boolean, ...}} props\r\n     * @param {React.Component} owner\r\n     */\r\n    constructor(owner, props) {\r\n        this.owner = owner;\r\n        this.name = Object.getPrototypeOf(this).constructor.name;\r\n        this.enabled = true;\r\n    }\r\n\r\n    //вызывается в конструкторе и в componentWillReceiveProps.\r\n    updateProps(props) {\r\n        this.enabled = ( !(props instanceof Object) || props.enabled === undefined) ? true : props.enabled;\r\n    }\r\n}\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/behaviour.js","import React, { Component, PropTypes } from 'react';\r\n\r\n/**\r\n * Базовый класс для всех реакт компонентов, использующих behaviours.\r\n * Содержит логику вызова функций в behaviours. Если BehaviourX.enabled=true, то его методы будут вызваны.\r\n */\r\nexport default class BehavioursContainer extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.behaviours = [];\r\n\r\n        this.bindMethods = (methods)=> {\r\n            methods.forEach((method) => this[method] = this[method].bind(this));\r\n        };\r\n\r\n        //для обработчиков событий нужно делать так, иначе this будет undefined\r\n        this.bindMethods(['changeHandler', 'keyDownHandler']);\r\n    }\r\n\r\n    initBehaviours(behaviours) {\r\n        this.behaviours = behaviours;\r\n\r\n        behaviours.forEach((behaviour) => {\r\n            let name = firstToLowerCase(behaviour.name);\r\n            this[name] = behaviour;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Вызывает метод с указанным именем во всех Behaviours c enabled=true.\r\n     */\r\n    callMethodInAllBehaviours(funcName, args) {\r\n        let behaviours = this.behaviours;\r\n        for (let i = 0; i < behaviours.length; i++) {\r\n            if (behaviours[i].enabled == true && behaviours[i][funcName]!==undefined) {\r\n                behaviours[i][funcName](args[0], args[1], args[2], args[3]);\r\n            }\r\n        }\r\n    }\r\n\r\n    _getBehaviour(behaviourName) {\r\n        for (let i = 0; i < this.behaviours.length; i++) {\r\n            let behaviour = this.behaviours[i];\r\n            if (behaviour.name == behaviourName)\r\n                return behaviour;\r\n        }\r\n        return null;\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        for (let propKey in nextProps) {\r\n            let behaviour = this._getBehaviour(propKey);\r\n            if (behaviour != null) {\r\n                behaviour.updateProps(nextProps[propKey]);\r\n            }\r\n        }\r\n    }\r\n\r\n    //Ниже перечень функций, вызываемый в поведениях\r\n    //shouldComponentUpdate отсутсвует, т.к. в нем нет необходимости\r\n\r\n    componentWillMount() {\r\n        this.callMethodInAllBehaviours('componentWillMount', arguments);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.callMethodInAllBehaviours('componentDidMount', arguments);\r\n    }\r\n\r\n    componentWillUpdate(nextProps, nextState) {\r\n        this.callMethodInAllBehaviours('componentWillUpdate', arguments);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        this.callMethodInAllBehaviours('componentDidUpdate', arguments);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.callMethodInAllBehaviours('componentWillUnmount', arguments);\r\n    }\r\n\r\n    //здесь перечень обработчиков стандартных событий - https://facebook.github.io/react/docs/events.html\r\n    //перечень далеко не полный, поэтому при необходимости нужно дописать сюда нужные обработчики\r\n    changeHandler(event) {\r\n        this.callMethodInAllBehaviours('onChange', arguments);\r\n    }\r\n\r\n    keyDownHandler(event) {\r\n        this.callMethodInAllBehaviours('onKeyDown', arguments);\r\n    }\r\n}\r\n\r\nfunction firstToLowerCase( str ) {\r\n    return str.substr(0, 1).toLowerCase() + str.substr(1);\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/behaviours-container.js","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external {\"root\":\"React\",\"commonjs2\":\"react\",\"commonjs\":\"react\",\"amd\":\"react\"}\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}